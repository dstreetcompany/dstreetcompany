html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Roleta DStreet</title>
  <style>
    body {
      margin: 0;
      font-family: 'Arial', sans-serif;
      background: #111;
      color: #fff;
      text-align: center;
    }

    header img {
      margin-top: 20px;
      width: 180px;
    }

    h1 {
      margin-top: 20px;
      font-size: 26px;
      color: #ffce00;
      font-weight: bold;
      animation: piscar 1.5s infinite;
    }

    @keyframes piscar {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.4; }
    }

    .regras {
      margin-top: 10px;
      font-size: 18px;
      color: #00ffea;
      font-family: 'Comic Sans MS', cursive, sans-serif;
    }

    #roleta-container {
      margin: 30px auto;
      position: relative;
      width: 320px;
      height: 320px;
    }

    canvas {
      border-radius: 50%;
      background-color: #222;
    }

    #botao-girar {
      margin-top: 20px;
      padding: 12px 25px;
      font-size: 18px;
      background-color: #ffce00;
      color: #000;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-weight: bold;
    }

    #resultado {
      margin-top: 20px;
      font-size: 20px;
      color: #fff;
    }
  </style>
</head>
<body>
  <header>
    <img src="https://i.imgur.com/9UNN6dL.png" alt="Logo DStreet Company"/>
  </header>

  <h1>Gire e leve para casa até 10 camisetas!</h1>
  <div class="regras">R$5 = 1 giro | R$10 = 3 giros | R$20 = 4 giros</div>

  <div id="roleta-container">
    <canvas id="roleta" width="320" height="320"></canvas>
  </div>

  <button id="botao-girar">GIRAR</button>

  <div id="resultado"></div>

  <script>
    const canvas = document.getElementById('roleta');
    const ctx = canvas.getContext('2d');
    const botao = document.getElementById('botao-girar');
    const resultado = document.getElementById('resultado');

    const premios = ["10 camisetas", "Tente outra vez", "5 camisetas", "Tente outra vez", "3 camisetas", "Tente outra vez"];
    const cores = ["#ff3c3c", "#444", "#3cff3c", "#444", "#3c9fff", "#444"];

    let anguloAtual = 0;
    let girando = false;
    let girosFeitos = 0;

    function desenharRoleta() {
      const raio = canvas.width / 2;
      const centroX = canvas.width / 2;
      const centroY = canvas.height / 2;
      const anguloPorPremio = (2 * Math.PI) / premios.length;

      for (let i = 0; i < premios.length; i++) {
        ctx.beginPath();
        ctx.moveTo(centroX, centroY);
        ctx.fillStyle = cores[i];
        ctx.arc(centroX, centroY, raio, i * anguloPorPremio, (i + 1) * anguloPorPremio);
        ctx.lineTo(centroX, centroY);
        ctx.fill();

        ctx.save();
        ctx.translate(centroX, centroY);
        ctx.rotate(i * anguloPorPremio + anguloPorPremio / 2);
        ctx.textAlign = "right";
        ctx.fillStyle = "#fff";
        ctx.font = "bold 14px Arial";
        ctx.fillText(premios[i], raio - 10, 5);
        ctx.restore();
      }
    }

    function girarRoleta() {
      if (girando) return;
      girando = true;
      resultado.textContent = '';

      girosFeitos++;

      let premioIndex;
      if (girosFeitos % 100 === 0) {
        const opcoes = [0, 2, 4]; // índices com prêmios reais
        premioIndex = opcoes[Math.floor(Math.random() * opcoes.length)];
      } else {
        const opcoes = [1, 3, 5]; // tente outra vez
        premioIndex = opcoes[Math.floor(Math.random() * opcoes.length)];
      }

      const anguloPorPremio = 360 / premios.length;
      const anguloFinal = 360 * 5 + (premioIndex * anguloPorPremio) + anguloPorPremio / 2;

      let inicio = null;

      function animar(timestamp) {
        if (!inicio) inicio = timestamp;
        const progresso = timestamp - inicio;
        const angulo = easeOut(progresso / 3000) * anguloFinal;

        anguloAtual = angulo;
        desenhar(anguloAtual);
        if (progresso < 3000) {
          requestAnimationFrame(animar);
        } else {
          girando = false;
          resultado.textContent = "Resultado: " + premios[premioIndex];
        }
      }

      requestAnimationFrame(animar);
    }

    function easeOut(t) {
      return 1 - Math.pow(1 - t, 3);
    }

    function desenhar(angulo) {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.save();
      ctx.translate(canvas.width / 2, canvas.height / 2);
      ctx.rotate((angulo * Math.PI) / 180);
      ctx.translate(-canvas.width / 2, -canvas.height / 2);
      desenharRoleta();
      ctx.restore();
    }

    desenharRoleta();
    botao.addEventListener('click', girarRoleta);
  </script>
</body>
</html>
